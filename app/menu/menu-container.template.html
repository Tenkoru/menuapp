<h1 class="title">Menu App</h1>

<div class="filters">
    <h2 class="filters__title">Filters</h2>
    <button type="button" ng-click="$ctrl.resetFilters()">Reset</button>
    <ul class="filters__list">
        <li class="filters__item">
            <label>
                By all
                <input type="text" ng-model="$ctrl.allQuery" ng-change="$ctrl.saveToLocalstorage('all', $ctrl.allQuery)" />
            </label>
        </li>
        <li class="filters__item">
            <label>
                By title
                <input type="text" ng-model="$ctrl.titleQuery" ng-change="$ctrl.saveToLocalstorage('title', $ctrl.titleQuery)" />
            </label>
        </li>
        <li class="filters__item">
            <label>
                By image
                <input type="text" ng-model="$ctrl.imageQuery" ng-change="$ctrl.saveToLocalstorage('image', $ctrl.imageQuery)" />
            </label>
        </li>
        <li class="filters__item">
            <label>
                By rating
                <input type="text" ng-model="$ctrl.ratingQuery" ng-change="$ctrl.saveToLocalstorage('rating', $ctrl.ratingQuery)" />
            </label>
        </li>
        <li class="filters__item">
            <label>
                By priceating
                <input type="text" ng-model="$ctrl.priceQuery" ng-change="$ctrl.saveToLocalstorage('price', $ctrl.priceQuery)" />
            </label>
        </li>
    </ul>
</div>

<table class="table">
    <tr>
        <th ng-repeat="header in $ctrl.headers" class="table__th">
            <div class="th__inner">
                <span>{{header}}</span>
                <span class="table__th-label-wrapper">
                    <button ng-click="$ctrl.sortBy(header)">{{header}}</button>
                    <span
                        class="sortorder"
                        ng-show="$ctrl.orderProp === '{{header}}'"
                        ng-class="{reverse: $ctrl.reverse}"
                    ></span>
                </span>
            </div>
        </th>
    </tr>
    <tr
        class="table__row" ng-click="$ctrl.openModal(item)"
        ng-repeat="item in $ctrl.items | orderBy: $ctrl.orderProp:$ctrl.reverse | filter: $ctrl.search | filter: { title: $ctrl.titleQuery } | filter: { image: $ctrl.imageQuery } | filter: { rating: $ctrl.ratingQuery } | filter: { price: $ctrl.priceQuery }"
    >
        <td>{{item.title}}</td>
        <td>
            <img
                class="table__img"
                ng-src="{{item.image}}"
                width="{{$ctrl.image.width}}"
                height="{{$ctrl.image.height}}"
                alt="{{item.title}}"
            />
        </td>
        <td>{{item.rating}}</td>
        <td>{{item.price}}</td>
    </tr>
</table>
